<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>My Project: CPU API</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">CPU API</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmips__cpu__impl.html">mips_cpu_impl</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga5ca0622fa6ad0e99f57ad6a6700fd5a0"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structmips__cpu__impl.html">mips_cpu_impl</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mips__cpu.html#ga5ca0622fa6ad0e99f57ad6a6700fd5a0">mips_cpu_h</a></td></tr>
<tr class="separator:ga5ca0622fa6ad0e99f57ad6a6700fd5a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaebe2f805fa70e4173a6e7612f7daad33"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__mips__cpu.html#ga5ca0622fa6ad0e99f57ad6a6700fd5a0">mips_cpu_h</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mips__cpu.html#gaebe2f805fa70e4173a6e7612f7daad33">mips_cpu_create</a> (<a class="el" href="group__mips__mem__core.html#ga44cb6d8c907c01bee81a910dad598b64">mips_mem_h</a> mem)</td></tr>
<tr class="separator:gaebe2f805fa70e4173a6e7612f7daad33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3010c9bef64495edb04ac0d1b0233da8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="mips__core_8h.html#a4930a10ab4172dcfe4f60b6a47450ab8">mips_error</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mips__cpu.html#ga3010c9bef64495edb04ac0d1b0233da8">mips_cpu_reset</a> (<a class="el" href="group__mips__cpu.html#ga5ca0622fa6ad0e99f57ad6a6700fd5a0">mips_cpu_h</a> state)</td></tr>
<tr class="separator:ga3010c9bef64495edb04ac0d1b0233da8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8618c777acde1dc9969352168f93ef48"><td class="memItemLeft" align="right" valign="top"><a class="el" href="mips__core_8h.html#a4930a10ab4172dcfe4f60b6a47450ab8">mips_error</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mips__cpu.html#ga8618c777acde1dc9969352168f93ef48">mips_cpu_get_register</a> (<a class="el" href="group__mips__cpu.html#ga5ca0622fa6ad0e99f57ad6a6700fd5a0">mips_cpu_h</a> state, unsigned index, uint32_t *value)</td></tr>
<tr class="separator:ga8618c777acde1dc9969352168f93ef48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8ed85738edb7afd3f8dde71ef33247ed"><td class="memItemLeft" align="right" valign="top"><a class="el" href="mips__core_8h.html#a4930a10ab4172dcfe4f60b6a47450ab8">mips_error</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mips__cpu.html#ga8ed85738edb7afd3f8dde71ef33247ed">mips_cpu_set_register</a> (<a class="el" href="group__mips__cpu.html#ga5ca0622fa6ad0e99f57ad6a6700fd5a0">mips_cpu_h</a> state, unsigned index, uint32_t value)</td></tr>
<tr class="separator:ga8ed85738edb7afd3f8dde71ef33247ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa67aba88c4b4872d4649082d01dbebbd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="mips__core_8h.html#a4930a10ab4172dcfe4f60b6a47450ab8">mips_error</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mips__cpu.html#gaa67aba88c4b4872d4649082d01dbebbd">mips_cpu_set_pc</a> (<a class="el" href="group__mips__cpu.html#ga5ca0622fa6ad0e99f57ad6a6700fd5a0">mips_cpu_h</a> state, uint32_t pc)</td></tr>
<tr class="separator:gaa67aba88c4b4872d4649082d01dbebbd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2ad94a4acd597f907066a66741a82f08"><td class="memItemLeft" align="right" valign="top"><a class="el" href="mips__core_8h.html#a4930a10ab4172dcfe4f60b6a47450ab8">mips_error</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mips__cpu.html#ga2ad94a4acd597f907066a66741a82f08">mips_cpu_get_pc</a> (<a class="el" href="group__mips__cpu.html#ga5ca0622fa6ad0e99f57ad6a6700fd5a0">mips_cpu_h</a> state, uint32_t *pc)</td></tr>
<tr class="separator:ga2ad94a4acd597f907066a66741a82f08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaee35234424733286a149e712ced5765b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="mips__core_8h.html#a4930a10ab4172dcfe4f60b6a47450ab8">mips_error</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mips__cpu.html#gaee35234424733286a149e712ced5765b">mips_cpu_step</a> (<a class="el" href="group__mips__cpu.html#ga5ca0622fa6ad0e99f57ad6a6700fd5a0">mips_cpu_h</a> state)</td></tr>
<tr class="separator:gaee35234424733286a149e712ced5765b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6223b4968026c0ee512232af1cd5b409"><td class="memItemLeft" align="right" valign="top"><a class="el" href="mips__core_8h.html#a4930a10ab4172dcfe4f60b6a47450ab8">mips_error</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mips__cpu.html#ga6223b4968026c0ee512232af1cd5b409">mips_cpu_set_debug_level</a> (<a class="el" href="group__mips__cpu.html#ga5ca0622fa6ad0e99f57ad6a6700fd5a0">mips_cpu_h</a> state, unsigned level, FILE *dest)</td></tr>
<tr class="separator:ga6223b4968026c0ee512232af1cd5b409"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab4c02c9830ecef3c96dc140f5af53ba8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mips__cpu.html#gab4c02c9830ecef3c96dc140f5af53ba8">mips_cpu_free</a> (<a class="el" href="group__mips__cpu.html#ga5ca0622fa6ad0e99f57ad6a6700fd5a0">mips_cpu_h</a> state)</td></tr>
<tr class="separator:gab4c02c9830ecef3c96dc140f5af53ba8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="ga5ca0622fa6ad0e99f57ad6a6700fd5a0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structmips__cpu__impl.html">mips_cpu_impl</a>* <a class="el" href="group__mips__cpu.html#ga5ca0622fa6ad0e99f57ad6a6700fd5a0">mips_cpu_h</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>An opaque handle to a mips.</p>
<p>This represents a handle to a data-type that clients can use, without knowing how the CPU is implemented. See <a class="el" href="group__mips__mem__core.html#ga44cb6d8c907c01bee81a910dad598b64">mips_mem_h</a> for more commentary. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gaebe2f805fa70e4173a6e7612f7daad33"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__mips__cpu.html#ga5ca0622fa6ad0e99f57ad6a6700fd5a0">mips_cpu_h</a> mips_cpu_create </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__mips__mem__core.html#ga44cb6d8c907c01bee81a910dad598b64">mips_mem_h</a>&#160;</td>
          <td class="paramname"><em>mem</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Creates and initialises a new CPU instance.</p>
<p>The CPU should be bound to the given <a class="el" href="group__mips__mem__core.html">memory space</a>, and have all registers set to zero. The memory is not owned by the CPU, so it should not be <a class="el" href="group__mips__mem__core.html#gaf57ada13c19fbecdbc9cad810da59ca8">freed</a> when the CPU is <a class="el" href="group__mips__cpu.html#gab4c02c9830ecef3c96dc140f5af53ba8">freed</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mem</td><td>The memory space the processor is connected to; think of it as the address bus to which the CPU has been wired. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gab4c02c9830ecef3c96dc140f5af53ba8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mips_cpu_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__mips__cpu.html#ga5ca0622fa6ad0e99f57ad6a6700fd5a0">mips_cpu_h</a>&#160;</td>
          <td class="paramname"><em>state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Free all resources associated with state.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">state</td><td>Either a handle to a valid simulation state, or an empty (NULL) handle.</td></tr>
  </table>
  </dd>
</dl>
<p>It is legal to pass an empty handle to mips_cpu_free. It is illegal to pass the same non-empty handle to mips_cpu_free twice, and will result in undefined behaviour (i.e. anything could happen): </p><pre class="fragment">mips_cpu_h cpu=mips_cpu_create(...);
...
mips_cpu_free(h);   // This is fine
...
mips_cpu_free(h);   // BANG! or nothing. Or format the hard disk.
</pre><p>A better pattern is to always zero the variable after calling free, in case elsewhere you are not sure if resources have been released yet: </p><pre class="fragment">mips_cpu_h cpu=mips_cpu_create(...);
...
mips_cpu_free(h);   // This is fine
h=0;    // Make sure it is now empty
...
mips_cpu_free(h);   // Fine, nothing happens
h=0;    // Does nothing here, might could stop other errors</pre> 
</div>
</div>
<a class="anchor" id="ga2ad94a4acd597f907066a66741a82f08"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="mips__core_8h.html#a4930a10ab4172dcfe4f60b6a47450ab8">mips_error</a> mips_cpu_get_pc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__mips__cpu.html#ga5ca0622fa6ad0e99f57ad6a6700fd5a0">mips_cpu_h</a>&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>pc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Gets the pc for the next instruction.</p>
<p>Returns the program counter for the next instruction to be executed. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">state</td><td>Valid (non-empty) handle to a CPU </td></tr>
    <tr><td class="paramname">pc</td><td>Where to write the byte address too </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga8618c777acde1dc9969352168f93ef48"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="mips__core_8h.html#a4930a10ab4172dcfe4f60b6a47450ab8">mips_error</a> mips_cpu_get_register </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__mips__cpu.html#ga5ca0622fa6ad0e99f57ad6a6700fd5a0">mips_cpu_h</a>&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the current value of one of the 32 general purpose MIPS registers </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">state</td><td>Valid (non-empty) handle to a CPU </td></tr>
    <tr><td class="paramname">index</td><td>Index from 0 to 31 </td></tr>
    <tr><td class="paramname">value</td><td>Where to write the value to </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga3010c9bef64495edb04ac0d1b0233da8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="mips__core_8h.html#a4930a10ab4172dcfe4f60b6a47450ab8">mips_error</a> mips_cpu_reset </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__mips__cpu.html#ga5ca0622fa6ad0e99f57ad6a6700fd5a0">mips_cpu_h</a>&#160;</td>
          <td class="paramname"><em>state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reset the CPU as if it had just been created, with all registers zerod. However, it should not modify RAM. Imagine this as asserting the reset input of the CPU core. </p>

</div>
</div>
<a class="anchor" id="ga6223b4968026c0ee512232af1cd5b409"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="mips__core_8h.html#a4930a10ab4172dcfe4f60b6a47450ab8">mips_error</a> mips_cpu_set_debug_level </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__mips__cpu.html#ga5ca0622fa6ad0e99f57ad6a6700fd5a0">mips_cpu_h</a>&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>dest</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Controls printing of diagnostic and debug messages.</p>
<p>You are encouraged to include diagnostic and debugging information in your CPU, but you should include a way to control how much is printed. The default should be to print nothing, but it is a good idea to have a way of turning it on and off <em>without</em> recompiling. This function provides a way for the user to indicate both how much output they are interested in, and where that output should go (should it go to stdout, or stderr, or a file?).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">state</td><td>Valid (non-empty) CPU handle.</td></tr>
    <tr><td class="paramname">level</td><td>What level of output should be printed. There is no specific format for the output format, the only requirement is that for level zero there is no output.</td></tr>
    <tr><td class="paramname">dest</td><td>Where the output should go. This should be remembered by the CPU simulator, then later passed to fprintf to provide output.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>It is required that if level&gt;0 then dest!=0, so the caller will always provide a valid destination if they have indicated they will require output.</dd></dl>
<p>It is suggested that for level=1 you print out one line of information per instruction with basic information like the program counter and the instruction type, and for higher levels you may want to print the CPU state before each instruction. Both of these can usually be inserted in just one place in the processor, and can greatly aid debugging.</p>
<p>However, this is completely implementation defined behaviour, so your simulator does not have to print anything for any debug level if you don't want to.</p>
<p>The intent is that this function merely modifies the type of reporting that is performed during mips_cpu_step:</p>
<p>Enable basic debugging to stderr mips_cpu_set_debug_level(cpu, 1, stderr);</p>
<p>The implementation may now choose to print things to stderr (what exactly is up to the implementation) mips_cpu_step(cpu); // e.g. prints "pc = 0x12, encoding=R"</p>
<p>Tell the CPU to print nothing mips_cpu_set_debug_level(cpu, 0, NULL);</p>
<p>Now the implementation must not print any debug information mips_cpu_step(cpu);</p>
<p>Send detailed debug output to a text file FILE *dump=fopen("dump.txt", "wt"); mips_cpu_set_debug_level(cpu, 2, dump);</p>
<p>Run lots of instructions until the CPU reports an error. The implementation can write lots of useful information to the file mips_error err=mips_Success; while(!err) { mips_cpu_step(cpu); };</p>
<p>Detach the text file, and close it mips_cpu_set_debug_level(cpu, 0, NULL); fclose(dump);</p>
<p>You can now read through the text file "dump.txt" to see what happened </p><pre class="fragment">However, you could decide that you want to print something out
at the point that mips_cpu_set_debug_level is called with level&gt;0,
such as the current PC and registers. Up to you.</pre> 
</div>
</div>
<a class="anchor" id="gaa67aba88c4b4872d4649082d01dbebbd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="mips__core_8h.html#a4930a10ab4172dcfe4f60b6a47450ab8">mips_error</a> mips_cpu_set_pc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__mips__cpu.html#ga5ca0622fa6ad0e99f57ad6a6700fd5a0">mips_cpu_h</a>&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>pc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sets the program counter for the next instruction to the specified byte address.</p>
<p>While this sets the value of the PC, it should not cause any kind of execution to happen. Once you look at branches in detail, you will see that there is some slight ambiguity about this function. Choose the only option that makes sense. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">state</td><td>Valid (non-empty) handle to a CPU </td></tr>
    <tr><td class="paramname">pc</td><td>Address of the next instruction to exectute. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga8ed85738edb7afd3f8dde71ef33247ed"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="mips__core_8h.html#a4930a10ab4172dcfe4f60b6a47450ab8">mips_error</a> mips_cpu_set_register </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__mips__cpu.html#ga5ca0622fa6ad0e99f57ad6a6700fd5a0">mips_cpu_h</a>&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Modifies one of the 32 general purpose MIPS registers. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">state</td><td>Valid (non-empty) handle to a CPU </td></tr>
    <tr><td class="paramname">index</td><td>Index from 0 to 31 </td></tr>
    <tr><td class="paramname">value</td><td>New value to write into register file </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gaee35234424733286a149e712ced5765b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="mips__core_8h.html#a4930a10ab4172dcfe4f60b6a47450ab8">mips_error</a> mips_cpu_step </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__mips__cpu.html#ga5ca0622fa6ad0e99f57ad6a6700fd5a0">mips_cpu_h</a>&#160;</td>
          <td class="paramname"><em>state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Advances the processor by one instruction.</p>
<p>If an exception or error occurs, the CPU and memory state should be left unchanged. This is so that the user can inspect what happened and find out what went wrong. So this should be true: </p><pre class="fragment">uint32_t pcOrig, pcGot;
mips_cpu_get_pc(cpu, &amp;pcOrig);
mips_error err=mips_cpu_step(cpu);
if(err!=mips_Success){
    mips_cpu_get_pc(cpu, &amp;pcGot);
    assert(pcOrig==pcGot);
    assert(mips_cpu_step(cpu)==err);
}
</pre><p>Maintaining this property in all cases is actually pretty difficult, so <em>try</em> to maintain it, but don't worry too much if under some exceptions it doesn't quite work. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">state</td><td>Valid (non-empty) handle to a CPU </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.10
</small></address>
</body>
</html>
