<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>My Project: Concrete Memory Devices</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Concrete Memory Devices<div class="ingroups"><a class="el" href="group__mips__mem.html">Memory</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga19a71d1cfc32dfff1ca6f064b5bb0e80"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__mips__mem__core.html#ga44cb6d8c907c01bee81a910dad598b64">mips_mem_h</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mips__mem__devices.html#ga19a71d1cfc32dfff1ca6f064b5bb0e80">mips_mem_create_ram</a> (uint32_t cbMem, uint32_t blockSize)</td></tr>
<tr class="separator:ga19a71d1cfc32dfff1ca6f064b5bb0e80"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga19a71d1cfc32dfff1ca6f064b5bb0e80"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__mips__mem__core.html#ga44cb6d8c907c01bee81a910dad598b64">mips_mem_h</a> mips_mem_create_ram </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>cbMem</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>blockSize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialise a new RAM of the given size.</p>
<p>The RAM will expect transactions to be at the granularity of the blockSize. This means any reads or writes must be aligned to the correct blockSize, and should consist of an integer number of blocks. For example, choosing blockSize=4 would result in a RAM that only supports aligned 32-bit reads and writes.</p>
<p>You can think of the blockSize as being equivalent to the number of wires in the data-bus of the memory. If the only wires you have are readEnable, writeEnable, address, dataIn, and dataOut, then within one cycle you could do a write by asserting writeEnable=1, specifying the address, and driving the data to be written onto dataIn. Or you could perform a read by asserting readEnable=1, driving the address bus, and looking at the value that the RAM drives onto dataOut. If blockSize=4, then we would have 32 wires for both dataIn and dataOut, and any address would need to have the two least significant bits as zero.</p>
<p>In MIPS the basic unit of transfer is 32-bits, so the granularity of the data bus is also 32-bits, and blockSize must be 4.</p>
<p>"Why do we even have this blockSize if it is always 4?" : It is in anticipation of a future extension, and a mistake on my part (from a teaching point of view). I should have given it the simpler signature of: </p><pre class="fragment">mips_mem_h mips_mem_create_ram(uint32_t cbMem);
</pre><p>and stated that it creates a RAM of the given size with a granularity of 4.</p>
<p>"How can MIPS do SH (store half) efficiently if this is the case?" - An actual MIPS implementation would have what are called "byte-enables", which are extra signals saying which bytes within the data bus are valid, but I didn't include them in the API as they complicate things. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cbMem</td><td>Total number of bytes of ram </td></tr>
    <tr><td class="paramname">blockSize</td><td>Granularity of transactions supported by RAM </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.10
</small></address>
</body>
</html>
